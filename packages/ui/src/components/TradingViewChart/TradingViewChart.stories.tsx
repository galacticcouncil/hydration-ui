import type { Meta, StoryFn } from "@storybook/react"

import { OhlcData, toUTCTimestamp } from "@/components/TradingViewChart/utils"

import { TradingViewChart } from "./TradingViewChart"

const MOCK_DATA = [
  [1739808000000, 96071, 96915, 95761, 95761, 3730025],
  [1739822400000, 95602, 95845, 95243, 95582, 3586938],
  [1739836800000, 95517, 96394, 95517, 95776, 3011972],
  [1739851200000, 95785, 96283, 95551, 96218, 3840940],
  [1739865600000, 96189, 96269, 95267, 95437, 1254290],
  [1739880000000, 95467, 95868, 95117, 95627, 2424540],
  [1739894400000, 95617, 96663, 95318, 95438, 2508298],
  [1739908800000, 95429, 95638, 93435, 94289, 4836613],
  [1739923200000, 94055, 95520, 93798, 95496, 4453626],
  [1739937600000, 95614, 95899, 95019, 95695, 3551460],
  [1739952000000, 95654, 95791, 95018, 95766, 1835183],
  [1739966400000, 95646, 96484, 95591, 96387, 3321365],
  [1739980800000, 96414, 96604, 95664, 96127, 1203906],
  [1739995200000, 95947, 96468, 95613, 96125, 2573244],
  [1740009600000, 96157, 96806, 96097, 96555, 4576727],
  [1740024000000, 96636, 97275, 96465, 97070, 2713542],
  [1740038400000, 97061, 97327, 96835, 97005, 1915751],
  [1740052800000, 96819, 97407, 96819, 97200, 2024060],
  [1740067200000, 97248, 98031, 96945, 97025, 1305654],
  [1740081600000, 96876, 98505, 96876, 98446, 1148827],
  [1740096000000, 98432, 98758, 98022, 98384, 1858029],
  [1740110400000, 98337, 98529, 98117, 98142, 2463502],
  [1740124800000, 98242, 98581, 98165, 98239, 3471805],
  [1740139200000, 98191, 98960, 98163, 98659, 2218391],
  [1740153600000, 98641, 99504, 97416, 98200, 1033402],
  [1740168000000, 97927, 98691, 95240, 95530, 2589373],
  [1740182400000, 95188, 96144, 94909, 96135, 2953946],
  [1740196800000, 95957, 96449, 95757, 96256, 2124796],
  [1740211200000, 96308, 96565, 96304, 96328, 2786178],
  [1740225600000, 96305, 96580, 96136, 96577, 4795503],
  [1740240000000, 96595, 96881, 96502, 96656, 3287453],
  [1740254400000, 96583, 96780, 96394, 96646, 3169770],
  [1740268800000, 96631, 96685, 96518, 96564, 3858548],
  [1740283200000, 96526, 96653, 96413, 96457, 2879197],
  [1740297600000, 96433, 96572, 96198, 96519, 3956457],
  [1740312000000, 96532, 96532, 96106, 96106, 1518277],
  [1740326400000, 96114, 96153, 95501, 95517, 3793763],
  [1740340800000, 95433, 95871, 95247, 95749, 3098305],
  [1740355200000, 95725, 96327, 95585, 96327, 1004245],
  [1740369600000, 96265, 96481, 95330, 95492, 3044106],
  [1740384000000, 95445, 95937, 95113, 95903, 4393561],
  [1740398400000, 95902, 96110, 95391, 95872, 1161129],
  [1740412800000, 95833, 95998, 93878, 94005, 1849951],
  [1740427200000, 94249, 95140, 93776, 93958, 4453530],
  [1740441600000, 93871, 94587, 91397, 91397, 4145428],
  [1740456000000, 91582, 92504, 90951, 92350, 1734833],
  [1740470400000, 92106, 92274, 88615, 89632, 3209935],
  [1740484800000, 89091, 89962, 87115, 89177, 4366735],
  [1740499200000, 89257, 89542, 86142, 87693, 3908446],
  [1740513600000, 87124, 87706, 86267, 87706, 3121875],
  [1740528000000, 87838, 89143, 87750, 88756, 3913132],
  [1740542400000, 88477, 89278, 88045, 88825, 4763214],
  [1740556800000, 88842, 89077, 88377, 88670, 4034602],
  [1740571200000, 88672, 89191, 88222, 88650, 1688521],
  [1740585600000, 88591, 88591, 85446, 87602, 1062315],
  [1740600000000, 87384, 87465, 83724, 83944, 3734963],
  [1740614400000, 83778, 85233, 82455, 83900, 4255420],
  [1740628800000, 84137, 85197, 83970, 85168, 4224742],
  [1740643200000, 85133, 86425, 84672, 86372, 4967233],
  [1740657600000, 86219, 86951, 85896, 86487, 4844060],
  [1740672000000, 86659, 86659, 84728, 85531, 1017988],
  [1740686400000, 85478, 85555, 83578, 83858, 1372759],
  [1740700800000, 83947, 84799, 82831, 84709, 1977960],
  [1740715200000, 84690, 84738, 79802, 80451, 3561823],
  [1740729600000, 79561, 80627, 78908, 78921, 1572565],
  [1740744000000, 79079, 80678, 78393, 80537, 2191060],
  [1740758400000, 80435, 84316, 80111, 84021, 1756293],
  [1740772800000, 83979, 84851, 83232, 84357, 3652898],
  [1740787200000, 84401, 84738, 83582, 84442, 3290323],
  [1740801600000, 84317, 85476, 83804, 85388, 4672040],
  [1740816000000, 85289, 86539, 84734, 84810, 2757545],
  [1740830400000, 84988, 85470, 84340, 84579, 2675581],
  [1740844800000, 84601, 84904, 84355, 84697, 3794086],
  [1740859200000, 84769, 85450, 84660, 85450, 2607159],
  [1740873600000, 85448, 86168, 85316, 86005, 4436851],
  [1740888000000, 85983, 86434, 85673, 85968, 4080004],
  [1740902400000, 85825, 86442, 85531, 86260, 4660959],
  [1740916800000, 86207, 86207, 85694, 86025, 4592955],
  [1740931200000, 86072, 88397, 85075, 87440, 4604134],
  [1740945600000, 87446, 94537, 87446, 93473, 1144886],
  [1740960000000, 93553, 94902, 93553, 94262, 2000763],
  [1740974400000, 94040, 94040, 92517, 92802, 1480930],
  [1740988800000, 92702, 93302, 91157, 92491, 2467012],
  [1741003200000, 92319, 92785, 91308, 92567, 1282291],
  [1741017600000, 92705, 93668, 89668, 90637, 2381703],
  [1741032000000, 90078, 90871, 85928, 85928, 1525066],
  [1741046400000, 85546, 86802, 85205, 86125, 1316083],
  [1741060800000, 86125, 86482, 82842, 84206, 4241074],
  [1741075200000, 83895, 84257, 83325, 83325, 3187240],
  [1741089600000, 83177, 84044, 83083, 83971, 1243858],
  [1741104000000, 83864, 84618, 81688, 82644, 1748775],
  [1741118400000, 82923, 88373, 82353, 88329, 1077403],
  [1741132800000, 88219, 88896, 86849, 87311, 4171216],
  [1741147200000, 87039, 87750, 86415, 87213, 3030462],
  [1741161600000, 86729, 87644, 86729, 87644, 4724232],
  [1741176000000, 87654, 90364, 87643, 89753, 4904111],
  [1741190400000, 90010, 90694, 88113, 88656, 3235154],
  [1741204800000, 88337, 90468, 87737, 89841, 3367792],
  [1741219200000, 90046, 90829, 89724, 90604, 3686917],
  [1741233600000, 90655, 91917, 90102, 91455, 4192343],
  [1741248000000, 91778, 92756, 91323, 91323, 1994332],
  [1741262400000, 91331, 91680, 90679, 91368, 3998589],
  [1741276800000, 91336, 91336, 89335, 90693, 2692858],
  [1741291200000, 90862, 90976, 88020, 89057, 2394971],
  [1741305600000, 88918, 90547, 88616, 90001, 1084757],
  [1741320000000, 89924, 90121, 84972, 87068, 4168930],
  [1741334400000, 86964, 88558, 86964, 88223, 2828988],
  [1741348800000, 88321, 89555, 88066, 88902, 2752017],
  [1741363200000, 89073, 90940, 88303, 88739, 1442415],
  [1741377600000, 88400, 88955, 86702, 87690, 2201511],
  [1741392000000, 87732, 88203, 85842, 86773, 4113437],
  [1741406400000, 86720, 86839, 85303, 85908, 4179578],
  [1741420800000, 85924, 86611, 85665, 86159, 2792757],
  [1741435200000, 86309, 86401, 85765, 85838, 4038377],
  [1741449600000, 85922, 86547, 85836, 86372, 2182253],
  [1741464000000, 86336, 86411, 85739, 86301, 3120071],
  [1741478400000, 86205, 86467, 85918, 86143, 1601082],
  [1741492800000, 86173, 86483, 85962, 86164, 3827603],
  [1741507200000, 86091, 86105, 85848, 85896, 3340857],
  [1741521600000, 85977, 85977, 84753, 84961, 4130231],
  [1741536000000, 85037, 85037, 83024, 83029, 4705592],
  [1741550400000, 83053, 83631, 82279, 82735, 4191707],
  [1741564800000, 82655, 83348, 80183, 80751, 1238200],
  [1741579200000, 80675, 82648, 80124, 82106, 4681877],
  [1741593600000, 82040, 82661, 82040, 82349, 3404670],
  [1741608000000, 82343, 83690, 81313, 83209, 1546907],
  [1741622400000, 83620, 83627, 79367, 80261, 1477463],
  [1741636800000, 80036, 80036, 77495, 78906, 2831161],
  [1741651200000, 78863, 79770, 78658, 78784, 4629816],
  [1741665600000, 78537, 79729, 76784, 79614, 3260769],
  [1741680000000, 79475, 80541, 79475, 80438, 2763652],
  [1741694400000, 80348, 81933, 80348, 81793, 4386507],
  [1741708800000, 81709, 81828, 79271, 81380, 2258090],
  [1741723200000, 81233, 83458, 80678, 83122, 1459575],
  [1741737600000, 83135, 83221, 82586, 82799, 2598492],
  [1741752000000, 82943, 83746, 82142, 82204, 3106167],
  [1741766400000, 82085, 82423, 81371, 82423, 2228183],
  [1741780800000, 82422, 82944, 82048, 82944, 1713593],
  [1741795200000, 83006, 84074, 80833, 81764, 3875833],
  [1741809600000, 81731, 82968, 81634, 82891, 3683897],
  [1741824000000, 82973, 83884, 82715, 83884, 1209719],
  [1741838400000, 83678, 84252, 83329, 83634, 1944697],
  [1741852800000, 83553, 83616, 82882, 83216, 2137817],
  [1741867200000, 83201, 83437, 82669, 82828, 1812681],
  [1741881600000, 82953, 83426, 80941, 80956, 1127407],
  [1741896000000, 81014, 81124, 79948, 80304, 4471054],
  [1741910400000, 80218, 81407, 80218, 81099, 4506375],
  [1741924800000, 81015, 82087, 80857, 81815, 1543216],
  [1741939200000, 81897, 82456, 81777, 82311, 3868778],
  [1741953600000, 82183, 83321, 82183, 83221, 1288120],
]

const DATA = MOCK_DATA.map<OhlcData>((d) => ({
  time: toUTCTimestamp(d[0]),
  open: d[1],
  high: d[2],
  low: d[3],
  close: d[4],
  volume: d[5],
}))

export default {
  component: TradingViewChart,
} as Meta<typeof TradingViewChart>

export const Baseline: StoryFn = () => {
  return <TradingViewChart data={DATA} />
}

export const Candlestick: StoryFn = () => {
  return <TradingViewChart type="Candlestick" data={DATA} />
}
